# 継承

オブジェクト指向プロジェクトでクラスに対し、多態性(※1)を使うための体表的な方法

※1 多態性とは一つの抽象インターフェースを作成し、そのインターフェースに対して色んな実装クラスを連結する能力を言う。


## 継承の概念

継承を正しく使うため、継承の以下の概念を理解する必要がある。

### アップキャスト

親タイプで作られた変数に子クラスのインスタンスをセットすること

```
Parent p = new ChildRun();
```

### 動的メソッド探索

オブジェクト指向プログラミングは以下のルールによって実行するメソッドを選択する。

+ メッセージを受信したクラスはまず自分が生成したクラスにメソッドがあるか探索してあったらメソッドを実行して探索を終了する。

+ メソッドを見つけなかったら、親クラスでメソッドの探索を続ける。この過程はメソッドが探索ができるまで続く。

+ 継承クラスの一番上のクラスまで続いたけど、メソッドを見つけなかった時は例外を発生し、探索を中断する。

### 動的バインディング

作られたタイプではなくメッセージを受信するクラスのタイプにより実行するメソッドが決まる。

```
Parent p = new ChildRun();
p.method(); 
※ ParentとChildRunは親と子クラス関係でmethod()というメソッドを定義したとする
```
この場合作られたタイプ(Parent)ではなく、メッセージを受信するクラスのタイプ(ChildRun)によりメソッドが実行される。

### self参照

メッセージを受信するクラスを示す。そのクラスから動的メソッド探索を行う。

```
Parent p = new ChildRun();
p.method(); 

class ChildRun extends Parent {
	public void method(){
		this.method();
	}
}

探索順次
self -> ChildRun.method() (もしChildRun.methodがなかったら -> Parent.method())
```

### super参照

メッセージを受信するクラスの親クラスから動的メソッド探索を行う。

```
Parent p = new ChildRun();
p.method(); 

class ChildRun extends Parent {
	public void method(){
		super.method();
	}
}

super -> Parent.method()
```

## 感想

どうやってタイプが親なのに、子クラスのメソッドが実行できるか疑問だったのですが上記の継承の概念を基にできたことでした。   
継承について深く理解できるいい機会だったと思います。



